<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Error Dev</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="storage/internal/page-styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
</head>
<body>
    <div class="page-container">
        <h1 class="page-title">Welcome</h1>
        
        <div id="about-me" class="section">
            <h2>About Me</h2>
            <div class="card bio-card"></div>
        </div>
        
        <div id="skills" class="section">
            <h2>Skills</h2>
            <div class="skills-grid"></div>
        </div>
        
        <div id="socials" class="section">
            <h2>Socials</h2>
            <div class="socials-grid"></div>
        </div>
    </div>
    
    <script>
        async function loadYAML(path) {
            const response = await fetch(path);
            const text = await response.text();
            return jsyaml.load(text);
        }

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const data = await loadYAML('storage/data/home.yaml');
                
                console.log('Home data loaded:', data);
                
                if (!data || !data.home) {
                    console.error('No data loaded');
                    return;
                }
                
                const homeData = data.home;
                
                // Render bio
                if (homeData.bio) {
                    const bioCard = document.querySelector('.bio-card');
                    bioCard.innerHTML = marked.parse(homeData.bio);
                }
                
                // Render skills
                if (homeData.skills) {
                    const skillsGrid = document.querySelector('.skills-grid');
                    
                    homeData.skills.forEach(skillItem => {
                        console.log('Processing skill:', skillItem);
                        
                        // Check if it's an object with skill property or just a string
                        const skillText = typeof skillItem === 'string' ? skillItem : skillItem.skill;
                        const skillLink = typeof skillItem === 'object' ? skillItem.link : null;
                        
                        if (skillLink) {
                            // Skill with link - make it clickable
                            const card = document.createElement('a');
                            card.className = 'skill-card skill-card-link';
                            card.href = skillLink;
                            card.target = '_blank';
                            card.rel = 'noopener noreferrer';
                            card.textContent = skillText;
                            skillsGrid.appendChild(card);
                        } else {
                            // Skill without link
                            const card = document.createElement('div');
                            card.className = 'skill-card';
                            card.textContent = skillText;
                            skillsGrid.appendChild(card);
                        }
                    });
                }
                
                // Render socials
                if (homeData.socials) {
                    const socialsGrid = document.querySelector('.socials-grid');
                    
                    homeData.socials.forEach(social => {
                        const card = document.createElement('a');
                        card.className = 'social-card';
                        card.href = social.link;
                        card.target = '_blank';
                        card.rel = 'noopener noreferrer';
                        card.textContent = social.name;
                        socialsGrid.appendChild(card);
                    });
                }
            } catch (error) {
                console.error('Error loading home page:', error);
            }
            
            // Handle hash navigation within page
            if (window.location.hash) {
                const hash = window.location.hash.substring(1);
                const target = document.getElementById(hash);
                if (target) {
                    setTimeout(() => {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                }
            }
        });
    </script>
</body>
</html>